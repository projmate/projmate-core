// Generated by CoffeeScript 1.6.1
(function() {
  var Assetx, assert, fileContains, getResource, path, x, _ref;

  assert = require("chai").assert;

  Assetx = require("..");

  path = require("path");

  _ref = require("./helpers"), getResource = _ref.getResource, fileContains = _ref.fileContains;

  x = null;

  describe("assetx merge", function() {
    before(function() {
      var app, assetx;
      app = {
        version: "3.0.x"
      };
      assetx = new Assetx({
        baseDir: __dirname,
        outputDir: path.join(__dirname, 'output'),
        merge: true
      });
      return assetx.attach({
        app: app
      }, function(err) {
        return x = app.locals.x;
      });
    });
    return it("should compile and merge scripts", function() {
      var filename, out;
      out = x.script("res/test.js res/foo.js");
      filename = getResource(out);
      assert.isTrue(out.indexOf(".js") > 0);
      return assert.isTrue(fileContains(filename, /var sum.+\n.*this\.require/));
    });
  });

}).call(this);
